<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_ek_import_generate_invoice_wizard" model="ir.ui.view">
            <field name="name">ek.import.generate.invoice.wizard</field>
            <field name="model">ek.import.generate.invoice</field>
            <field name="arch" type="xml">
                <form string="Generar Facturas">
                    <div class="alert alert-info" role="alert" attrs="{'invisible': [('source','!=','xlsx')]}">
                        <p>Tenga en cuenta que para importar correctamente su plantilla necesita ser un archivo excel y debera tener las siguientes columnas</p>
                        <ul>
                            <li><b>[Columna A] </b><em style="color:red">CODIGO:</em> Este referenciará el código principal del producto en sistema.</li>
                            <li><b>[Columna B] </b><em style="color:red">CANTIDAD:</em> Este referenciará la cantidad del producto que el proveedor le está facturando.</li>
                            <li><b>[Columna C] </b><em style="color:red">PRECIO:</em> Este referenciará el precio del producto que el proveedor le está facturando, si no se coloca utilizara de forma predeterminada el precio del pedido.</li>
                        </ul>
                    </div>
                    <group string="Generar Facturas">
                        <group>
                            <field name="is_gruping"/>
                            <field name="name" required="1"/>
                            <field name="source" invisible="1"/>
                            <field name="journal_id" domain="[('type','=','purchase')]" required="1"/>
                        </group>
                        <group>
                            <field name="date" required="1"/>
                            <field name="l10n_latam_document_type_id" domain="[('code','in',('15','02','03','100'))]" required="1"/>
                            <field name="reference"/>
                        </group>
                    </group>
                    <group colspan="4" attrs="{'invisible': [('source','!=','xlsx')]}">
                        <field name="template_xlsx" filename="template_xlsx_name" attrs="{'required': [('source','=','xlsx')]}"/>
                    </group>
                     <group colspan="4">
                        <field name="note"/>
                    </group>
                    <group colspan="4" attrs="{'invisible': [('errors_ids','=',[])]}">
                        <div class="alert alert-danger" role="alert" attrs="{'invisible': [('source','!=','xlsx')]}" col="4" colspan="4">
                            <p>Los registros mostrados a continuación representan errores que han sido encontrados en la plantilla y puede deberse a:</p>
                            <ul>
                                <li><b>1 </b>Los códigos ingresados no son parte de la importación.</li>
                                <li><b>2 </b>Las cantidades ingresadas sobrepasan cantidad ingresada en la importación.</li>
                                <li><b>3 </b>El códigos ingresado no corresponde al código principal de ningún producto en el sistema.</li>
                            </ul>
                        </div>
                        <field name="errors_ids" nolabel="1">
                            <tree create="0" delete="0" editable="bottom">
                                <field name="line" readonly="1"/>
                                <field name="name" readonly="1"/>
                                <field name="product_qty" readonly="1"/>
                                <field name="price" readonly="1"/>
                                <field name="error" readonly="1" optional="hide"/>
                            </tree>
                        </field>
                    </group>

                    <footer>
                        <button name="action_confirm" string="Confirmar operación" type="object" class="oe_highlight"
                        confirm="Esta seguro que la información está correcta." attrs="{'invisible': [('source','!=','line')]}"/>
                        <button name="action_confirm_import" string="Importar Plantilla" type="object" class="oe_highlight"
                        confirm="Esta seguro que la información está correcta." attrs="{'invisible': [('source','!=','xlsx')]}"/>
                        o
                        <button string="Cancelar" class="oe_link" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>


        <record id="action_ek_import_generate_invoice_wizard" model="ir.actions.act_window">
            <field name="name">Generar Factura desde Importación</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">ek.import.generate.invoice</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_ek_import_generate_invoice_wizard"/>
            <field name="target">new</field>
        </record>

    </data>
</openerp>